Ansar Ahmed
ULTIMATE DESIGN TECHNOLOGY LLP
EE
1173919287
1173919287
Mumbai
ansar@mail.com



make parameter dynamic

and check pagination code sort all data this code sort current page data only
when i go to next page then it not return next sorted data it return constant data that belong to that page

we have google.html file write render function to render html file 
*********************







***************************888

# views.py
from rest_framework.views import APIView
from rest_framework.response import Response
from rest_framework import status
from google.oauth2 import id_token
from google.auth.transport import requests
from django.conf import settings
from .models import CustomUser
from rest_framework_simplejwt.tokens import RefreshToken

class GoogleLogin(APIView):
    def post(self, request):
        token = request.data.get("token")

        try:
            # Verify the token with Google's servers
            idinfo = id_token.verify_oauth2_token(token, requests.Request(), settings.GOOGLE_CLIENT_ID)

            if idinfo['iss'] not in ['accounts.google.com', 'https://accounts.google.com']:
                raise ValueError('Wrong issuer.')

            # Get user info from the token
            google_id = idinfo['sub']
            email = idinfo['email']
            name = idinfo['name']

            # Check if the user already exists, otherwise create one
            user, created = CustomUser.objects.get_or_create(
                google_id=google_id,
                defaults={'email': email, 'name': name, 'username': email.split('@')[0]}
            )

            # Generate JWT for the user
            refresh = RefreshToken.for_user(user)

            return Response({
                'refresh': str(refresh),
                'access': str(refresh.access_token),
            }, status=status.HTTP_200_OK)

        except ValueError:
            return Response({'error': 'Invalid token'}, status=status.HTTP_400_BAD_REQUEST)


            # settings.py
            REST_FRAMEWORK = {
                'DEFAULT_AUTHENTICATION_CLASSES': (
                    'rest_framework_simplejwt.authentication.JWTAuthentication',
                ),
            }
            
            SIMPLE_JWT = {
                'AUTH_HEADER_TYPES': ('Bearer',),
            }
            
            # Add your Google OAuth credentials
            GOOGLE_CLIENT_ID = 'your-google-client-id.apps.googleusercontent.com'


    pip install djangorestframework-simplejwt google-auth google-auth-oauthlib


            # models.py
            from django.db import models
            from django.contrib.auth.models import AbstractUser
            
            class CustomUser(AbstractUser):
                google_id = models.CharField(max_length=255, unique=True)
                email = models.EmailField(unique=True)
                name = models.CharField(max_length=255)